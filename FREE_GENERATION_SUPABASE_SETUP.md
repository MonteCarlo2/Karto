# Настройка Supabase для ленты свободной генерации

## Шаг 1: Создание таблицы в Supabase

1. Откройте **Supabase Dashboard** → **SQL Editor**
2. Скопируйте и выполните SQL из файла `supabase-free-generation-schema.sql`
3. Убедитесь, что таблица `free_generation_feed` создана успешно

## Шаг 2: Проверка

После выполнения SQL:
- Таблица `free_generation_feed` должна быть создана
- RLS (Row Level Security) должен быть включен
- Политики доступа должны быть настроены
- Индексы должны быть созданы

## Как это работает

1. **При генерации изображения**: Автоматически сохраняется в Supabase с `user_id`
2. **При загрузке страницы**: Данные загружаются из Supabase для авторизованных пользователей
3. **При изменении избранного**: Обновляется в Supabase
4. **Fallback**: Если Supabase недоступен или пользователь не авторизован, используется localStorage

## Важно

- Все данные привязаны к `user_id` из `auth.users`
- Каждый пользователь видит только свои данные
- Данные синхронизируются между устройствами и браузерами
- localStorage используется только как fallback для неавторизованных пользователей
