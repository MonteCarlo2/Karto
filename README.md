# KARTO ‚Äî –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–∞—Ä—Ç–æ—á–µ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤

–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ —Ç–æ–≤–∞—Ä–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º AI.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–£–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ–Ω–∞** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–µ–∑–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ —Å –ª—é–±–æ–≥–æ —Ñ–æ–Ω–∞
- **–£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞** ‚Äî –ø–æ–≤—ã—à–µ–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏ —á–µ—Ç–∫–æ—Å—Ç–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–æ–Ω–æ–≤** ‚Äî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ñ–æ–Ω—ã –¥–ª—è –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤
- **–ö–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥** ‚Äî –Ω–∞–ª–æ–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Ñ–æ–Ω —Å —Ç–µ–Ω—è–º–∏ –∏ –æ—Å–≤–µ—â–µ–Ω–∏–µ–º
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞** ‚Äî SEO-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∏ –æ–ø–∏—Å–∞–Ω–∏—è

## üìã –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Next.js 16+** (App Router)
- **TypeScript**
- **Tailwind CSS**
- **Sharp** (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
- **Replicate API** (AI –º–æ–¥–µ–ª–∏)

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –∫–ª—é—á–µ–π

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
# Replicate API (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
# –ü–æ–ª—É—á–∏—Ç–µ –∫–ª—é—á –Ω–∞ https://replicate.com/account/api-tokens
REPLICATE_API_TOKEN=r8_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

### 3. –ó–∞–ø—É—Å–∫

```bash
# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev

# –ü—Ä–æ–¥–∞–∫—à–Ω —Å–±–æ—Ä–∫–∞
npm run build
npm start
```

### 4. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

- **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:** http://localhost:3000
- **–°—Ç—É–¥–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:** http://localhost:3000/studio

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ segment/        # –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ–Ω–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ enhance/        # –£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ generate-background/  # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–æ–Ω–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ composite/      # –ö–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ process/        # –ü–æ–ª–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ upload/         # –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ studio/             # UI —Å—Ç—É–¥–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ components/             # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îî‚îÄ‚îÄ lib/
    ‚îî‚îÄ‚îÄ services/
        ‚îú‚îÄ‚îÄ replicate.ts    # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Replicate API
        ‚îî‚îÄ‚îÄ image-processing.ts  # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
```

## üîÑ –ü–∞–π–ø–ª–∞–π–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏

```
–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ
     ‚Üì
–°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è (rembg) ‚Üí –¢–æ–≤–∞—Ä –±–µ–∑ —Ñ–æ–Ω–∞
     ‚Üì
–£–ª—É—á—à–µ–Ω–∏–µ (Real-ESRGAN) ‚Üí –í—ã—Å–æ–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
     ‚Üì
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–æ–Ω–∞ (SDXL) ‚Üí –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–æ–Ω
     ‚Üì
–ö–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥ (Sharp) ‚Üí –¢–æ–≤–∞—Ä + –§–æ–Ω + –¢–µ–Ω–∏
     ‚Üì
–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ (LLaVA) ‚Üí –û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
     ‚Üì
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ (LLaMA) ‚Üí –ù–∞–∑–≤–∞–Ω–∏–µ + –û–ø–∏—Å–∞–Ω–∏–µ
```

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

–ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –Ω–∞ 1 –∫–∞—Ä—Ç–æ—á–∫—É —á–µ—Ä–µ–∑ Replicate API:
- –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è: ~$0.01-0.02
- –£–ª—É—á—à–µ–Ω–∏–µ: ~$0.02-0.03
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–æ–Ω–∞: ~$0.03-0.05
- –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ: ~$0.01-0.02
- **–ò—Ç–æ–≥–æ: ~$0.07-0.12 (~5-10 ‚ÇΩ)**

## üá∑üá∫ –†–∞–±–æ—Ç–∞ –≤ –†–æ—Å—Å–∏–∏

–ï—Å–ª–∏ Replicate –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞–ø—Ä—è–º—É—é:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä
–ê—Ä–µ–Ω–¥—É–π—Ç–µ VPS –≤ –ï–≤—Ä–æ–ø–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ–∫—Å–∏ –¥–ª—è API-–∑–∞–ø—Ä–æ—Å–æ–≤.

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†–æ—Å—Å–∏–π—Å–∫–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã
- **Kandinsky** (–°–±–µ—Ä) ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **YandexART** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **GigaChat / YandexGPT** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤

## üìù API Endpoints

### POST /api/segment
–£–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ–Ω–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```json
{
  "imageUrl": "https://example.com/image.jpg"
}
```

### POST /api/enhance
–£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```json
{
  "imageUrl": "https://example.com/image.jpg",
  "scale": 2
}
```

### POST /api/generate-background
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–æ–Ω–∞
```json
{
  "preset": "studio",
  "width": 1024,
  "height": 1024
}
```

### POST /api/composite
–ö–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥ —Ç–æ–≤–∞—Ä–∞ –∏ —Ñ–æ–Ω–∞
```json
{
  "productUrl": "/temp/product.png",
  "backgroundUrl": "/temp/background.png",
  "productScale": 0.7,
  "positionX": 0.5,
  "positionY": 0.55,
  "addShadow": true
}
```

### POST /api/process
–ü–æ–ª–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω (FormData)
```
image: File
backgroundPreset: "studio" | "gradient" | "lifestyle" | "modern" | "premium"
generateText: "true" | "false"
```

## üéØ –ö–ª—é—á–µ–≤–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ

**–¢–æ–≤–∞—Ä –ù–ï –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç—Å—è!**

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –≥–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω—ã—Ö AI, –º—ã:
1. –í—ã—Ä–µ–∑–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–æ–≤–∞—Ä
2. –£–ª—É—á—à–∞–µ–º –µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–æ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º—ã)
3. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –§–û–ù
4. –ù–∞–∫–ª–∞–¥—ã–≤–∞–µ–º —Ç–æ–≤–∞—Ä –Ω–∞ —Ñ–æ–Ω

–†–µ–∑—É–ª—å—Ç–∞—Ç: —Ç–æ–≤–∞—Ä –≤—ã–≥–ª—è–¥–∏—Ç —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ, –∫–∞–∫ –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º —Ñ–æ—Ç–æ, –±–µ–∑ "–≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π" AI.
