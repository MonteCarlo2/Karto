# Варианты API для определения товара (без OpenAI)

## Текущая реализация (Replicate)

**Цепочка:** LLaVA (описание) → Llama 3 70B / Mixtral 8x7B / Mistral 7B (названия)

**Плюсы:**
- Работает из России
- Не требует новых API ключей (используется REPLICATE_API_TOKEN)
- Улучшена фильтрация — отсекаются предложения типа "Ваза имеет..."

**Минусы:**
- Качество ниже, чем у GPT-4o/Gemini
- Может выдавать предложения вместо названий

---

## Вариант 1: Google Gemini (рекомендуется)

**Что нужно:**
1. Получить API ключ: https://aistudio.google.com/app/apikey
2. Добавить в `.env.local`: `GEMINI_API_KEY=your_key_here`
3. Установлен пакет `@google/generative-ai` (уже установлен)

**Плюсы:**
- Качество близко к GPT-4o
- Может работать из России (нужно проверить на вашем хостинге)
- Один вызов: картинка → названия (быстрее)
- Дешевле OpenAI

**Минусы:**
- Нужен API ключ
- Может быть заблокирован (зависит от провайдера)

**Статус:** ✅ Готово к использованию (добавьте ключ)

---

## Вариант 2: YandexGPT / Yandex Cloud

**Что нужно:**
- API ключ от Yandex Cloud
- Проверить, есть ли у них vision API (приём картинки)
- Если нет vision: использовать только для шага "описание → названия" (вместо Llama/Mistral)

**Плюсы:**
- Работает из России (100%)
- Хорошее качество для русского языка
- Может быть дешевле

**Минусы:**
- Нужно проверить наличие vision API
- Если нет vision — всё равно нужен Replicate для описания

**Статус:** ⚠️ Требует проверки API и интеграции

---

## Вариант 3: GigaChat (Сбер)

**Что нужно:**
- API ключ от GigaChat
- Использовать для шага "описание → названия" (вместо Llama/Mistral)
- Replicate LLaVA остаётся для описания

**Плюсы:**
- Работает из России (100%)
- Хорошее качество для русского

**Минусы:**
- Нет vision (нужен Replicate для описания)
- Нужна интеграция

**Статус:** ⚠️ Требует интеграции

---

## Рекомендация

1. **Сначала попробуйте Gemini** — добавьте `GEMINI_API_KEY` в `.env.local`. Если работает с вашего сервера — это лучший вариант.

2. **Если Gemini не работает** — используйте текущую Replicate-цепочку (улучшена фильтрация). Можно попробовать другие модели на Replicate:
   - `qwen/qwen-2.5-72b-instruct` — хорошая модель для русского
   - `deepseek/deepseek-chat` — может быть лучше Mistral

3. **Для максимального качества из России** — рассмотрите YandexGPT или GigaChat для шага "описание → названия".
