# Деплой KARTO (Timeweb Cloud)

## Команды для панели приложения

- **Сборка:** `npm run build`
- **Запуск:** `npm run start`

Переменная окружения `PORT` должна быть задана (обычно панель подставляет сама).

## Важно для работы сайта

Сервер приложения должен получать **все** запросы к домену, в том числе:

- `/` — главная
- `/_next/static/...` — JS и CSS (чанки Next.js)
- `/api/...` — API-маршруты
- Любые другие пути приложения

Если прокси или настройки домена отдают только «главную страницу», а запросы к `/_next/*` не попадают в приложение (или отдаётся HTML вместо файлов), сайт будет открываться без стилей и с ошибками в консоли (`Unexpected token '<'`).

**Что проверить в Timeweb:**

1. В настройках приложения команда запуска именно `npm run start` (или `node .next/standalone/server.js`).
2. Нет ли «перехвата» путей вроде `/_next/*` на уровне прокси/nginx (все пути должны идти в Node-приложение).
3. При необходимости написать в поддержку: «Приложение Next.js: нужно, чтобы все запросы к домену (включая `/_next/static/*`) проксировались в Node-приложение, а не отдавался HTML».

После изменений в репозитории — сделать деплой заново (пересборку), чтобы подтянулись новые файлы.
