# Настройка SMTP для Mail.ru (aiora.help@mail.ru)

## Шаг 1: Создайте пароль для приложений

1. Зайдите на https://account.mail.ru/user/2-step-auth/passwords
2. Если двухфакторная аутентификация не включена - включите её
3. Нажмите **"Создать пароль для приложения"**
4. Введите название: **"KARTO Supabase"**
5. **ВАЖНО:** Скопируйте пароль! Он показывается только один раз!

## Шаг 2: Настройте в Supabase

1. **Supabase Dashboard** → **Settings** → **Authentication** → **SMTP Settings**
2. Включите **"Enable Custom SMTP"** (переключатель должен быть зелёным)
3. Заполните настройки:

```
Email address: aiora.help@mail.ru
Sender name: KARTO
Host: smtp.mail.ru
Port: 465
Username: aiora.help@mail.ru (полный email!)
Password: [пароль для приложений из шага 1]
```

4. Нажмите **"Save"**

## ✅ Готово!

Теперь регистрация должна работать! Письма будут отправляться от `aiora.help@mail.ru` с красивым шаблоном.

## Проверка работы

1. Сохраните настройки в Supabase
2. Зарегистрируйте тестового пользователя
3. Проверьте почту (включая папку "Спам")
4. Проверьте логи: **Supabase Dashboard** → **Logs** → **Auth Logs**

## ⚠️ Если не работает

### Проблема 1: "Authentication failed"

**Решение:**
- Убедитесь, что используете **пароль для приложений**, а не обычный пароль
- Проверьте, что пароль скопирован полностью, без пробелов
- Убедитесь, что Username = полный email (`aiora.help@mail.ru`)

### Проблема 2: Письма не приходят

**Решение:**
- Проверьте папку "Спам"
- Проверьте логи в Supabase: **Logs** → **Auth Logs**
- Убедитесь, что "Sender Email" совпадает с "Username"

### Проблема 3: Порт 465 не работает

**Решение:**
- Попробуйте порт **587** (TLS) вместо 465

## Важно

- ✅ Mail.ru работает стабильно с Supabase
- ✅ Пароль для приложений безопаснее обычного пароля
- ✅ Письма будут от вашей компании (`aiora.help@mail.ru`)
